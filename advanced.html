



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced Usage &mdash; python-api v3.0.32.dev_sphinx documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="python-api v3.0.32.dev_sphinx documentation" href="index.html"/>
        <link rel="prev" title="Smart Cut Fields" href="cookbook/smart_cut_fields.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    <a href='http://developer.shotgunsoftware.com'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo_sg@2x.png'/>
    
    </a>
    

          
            <a href="index.html" class="icon icon-home"> python-api
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">API Cookbook</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#packaging-an-application-with-py2app-or-py2exe">Packaging an application with py2app (or py2exe)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#https-validation-and-cacerts-txt">HTTPS Validation and cacerts.txt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ironpython">IronPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shotgun-server-api-changelog">Shotgun Server API Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">5.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">5.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">3.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">2.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">2.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">2.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
       
    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px; 
                color: #b3b3b3; 
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>    
    <style>
        a.custom_post_menu { display: inline; 
                             padding: 0px; 
                             text-decoration: underline; }
    </style>

    <b>python-api</b> v3.0.32.dev_sphinx.<br>
    
    For more information, please visit
    <a class=custom_post_menu href='https://support.shotgunsoftware.com/home'>Shotgun Support</a>.
    The code associated with this documentation can be found 
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/python-api'>here</a>.

    </div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">python-api</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Advanced Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-usage">
<span id="id1"></span><h1>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="packaging-an-application-with-py2app-or-py2exe">
<span id="packaging"></span><h2>Packaging an application with py2app (or py2exe)<a class="headerlink" href="#packaging-an-application-with-py2app-or-py2exe" title="Permalink to this headline">¶</a></h2>
<p>You can create standalone applications with Python scripts by using
<a class="reference external" href="https://pythonhosted.org/py2app/">py2app</a> on OS X or <a class="reference external" href="http://www.py2exe.org/">py2exe</a> on
Windows. This is often done to more easily distribute applications that have a GUI based on
toolkits like Tk, Qt or others.</p>
<p>There are caveats you need to be aware of when creating such an app.</p>
<div class="section" id="https-validation-and-cacerts-txt">
<h3>HTTPS Validation and cacerts.txt<a class="headerlink" href="#https-validation-and-cacerts-txt" title="Permalink to this headline">¶</a></h3>
<p>When creating the connection to Shotgun a file is used to validate the Shotgun certificate. This
file is located at <code class="docutils literal"><span class="pre">shotgun_api3/lib/httplib2/cacerts.txt</span></code>. Because this file is not a Python
file imported by your application, py2app will not know to include it in your package, it will
need to be explicitly specified in your <code class="docutils literal"><span class="pre">setup.py</span></code> file (edit the path based on the location
where your <code class="docutils literal"><span class="pre">shotgun_api3</span></code> package is located):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DATA_FILES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;shotgun_api3&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;/shotgun/src/python-api/shotgun_api3/lib/httplib2/cacerts.txt&#39;</span><span class="p">])</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Once you create your py2app package its contents should include two files (among others) in the
following structure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Contents</span><span class="o">/</span><span class="n">Resources</span><span class="o">/</span><span class="n">shotgun_api3</span><span class="o">/</span><span class="n">cacerts</span><span class="o">.</span><span class="n">txt</span>
<span class="o">./</span><span class="n">Contents</span><span class="o">/</span><span class="n">Resources</span><span class="o">/</span><span class="n">my_script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Where in <code class="docutils literal"><span class="pre">my_script.py</span></code> you can access the <code class="docutils literal"><span class="pre">cacerts.txt</span></code> file using a relative path to pass it
into the Shotgun connection&#8217;s constructor:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ca_certs</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s1">&#39;shotgun_api3&#39;</span><span class="p">,</span> <span class="s1">&#39;cacerts.txt&#39;</span><span class="p">)</span>
<span class="n">sg</span> <span class="o">=</span> <span class="n">shotgun_api3</span><span class="o">.</span><span class="n">Shotgun</span><span class="p">(</span><span class="s1">&#39;https://yoursite.shotgunstudio.com&#39;</span><span class="p">,</span> <span class="s1">&#39;script_name&#39;</span><span class="p">,</span> <span class="s1">&#39;script_key&#39;</span><span class="p">,</span>
                          <span class="n">ca_certs</span><span class="o">=</span><span class="n">ca_certs</span><span class="p">)</span>
</pre></div>
</div>
<p>The process for py2exe should be similar.</p>
</div>
</div>
<div class="section" id="ironpython">
<h2>IronPython<a class="headerlink" href="#ironpython" title="Permalink to this headline">¶</a></h2>
<p>We do not test against IronPython and cannot be sure that we won&#8217;t introduce breaking changes or
that we will be compatible with future releases of IronPython. While we don&#8217;t officially support
IronPython, we certainly will do our best to figure out any issues that come up while using it and
how to avoid them.</p>
<p>As of July 9, 2015 you can look at this fork of the repo to see what changes were needed as of that
date to make things work. The original fork was as of v3.0.20 of the API. Big thanks to our awesome
clients Pixomondo for making their work public and letting us refer to it:</p>
<p><a class="reference external" href="https://github.com/Pixomondo/python-api/tree/v3.0.20.ipy">https://github.com/Pixomondo/python-api/tree/v3.0.20.ipy</a></p>
<p>v3.0.20 can be used with IronPython with a little bit of added work:</p>
<ul class="simple">
<li>The Python API uses the zlib module to handle decompressing the gzipped response from the server.
There&#8217;s no built-in zlib module in IronPython, but there&#8217;s a potential solution from Jeff Hardy at
<a class="reference external" href="https://bitbucket.org/jdhardy/ironpythonzlib/src/">https://bitbucket.org/jdhardy/ironpythonzlib/src/</a>. And the blog post about it here
<a class="reference external" href="http://blog.jdhardy.ca/2008/12/solving-zlib-problem-ironpythonzlib.html">http://blog.jdhardy.ca/2008/12/solving-zlib-problem-ironpythonzlib.html</a></li>
<li>If you encounter any SSL errors like
<code class="docutils literal"><span class="pre">unknown</span> <span class="pre">field:</span> <span class="pre">SERIALNUMBER=0123456789</span></code> or <code class="docutils literal"><span class="pre">:SSL3_GET_SERVER_CERTIFICATE:certificate</span> <span class="pre">verify</span> <span class="pre">failed</span></code>.
For now you can workaround this problem by disabling ssl certificate validation which we&#8217;ve
encountered some intermittent issues with. Set <code class="docutils literal"><span class="pre">NO_SSL_VALIDATION</span> <span class="pre">=</span> <span class="pre">True</span></code> for either case.
See <a class="reference internal" href="reference.html#shotgun_api3.shotgun.NO_SSL_VALIDATION" title="shotgun_api3.shotgun.NO_SSL_VALIDATION"><code class="xref py py-const docutils literal"><span class="pre">shotgun_api3.shotgun.NO_SSL_VALIDATION</span></code></a></li>
<li>If you encounter <code class="docutils literal"><span class="pre">LookupError:</span> <span class="pre">unknown</span> <span class="pre">encoding:</span> <span class="pre">idna</span></code>, you can force utf-8 by changing
iri2uri.py ~ln 71 from <code class="docutils literal"><span class="pre">authority</span> <span class="pre">=</span> <span class="pre">authority.encode('idna')</span></code> to
<code class="docutils literal"><span class="pre">authority</span> <span class="pre">=</span> <span class="pre">authority.encode('utf-8')</span></code></li>
<li>If you encounter an SSL error such as <code class="docutils literal"><span class="pre">SSL3_READ_BYTES:sslv3</span> <span class="pre">alert</span> <span class="pre">handshake</span> <span class="pre">failure</span></code>, then the
lower level SSL library backing python&#8217;s network infrastructure is attempting to connect to our
servers via SSLv3, which is no longer supported. You can use the code from this gist to force the
SSL connections to use a specific protocol. The forked repo linked above has an example of how to
do that to force the use of TLSv1.</li>
</ul>
</div>
<div class="section" id="shotgun-server-api-changelog">
<h2>Shotgun Server API Changelog<a class="headerlink" href="#shotgun-server-api-changelog" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This list is out of date and has not been updated since May, 2014.</p>
</div>
<p>The following is a list of changes in the Shotgun server code that affect the API. These are not changes in the Python API code, rather fixes/changes to the Shotgun server&#8217;s API interface that may affect behavior. Generally changes to the Shotgun server API code are ensured to be non-breaking and backwards compatible bug fixes and feature enhancements. This is to ensure your scripts will not unexpectedly break when updating.</p>
<p>These updates should also appear on the general Release Notes pages but are provided here for convenience.</p>
<p>Format: <strong>[Shotgun server version]</strong>: Description of change made. [internal ticket #]</p>
<div class="section" id="id2">
<h3>5.3<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[5.3.15]</strong>: Added filtering out Archived projects. [25082]</li>
<li><strong>[5.3.12]</strong>: Added support for API <code class="docutils literal"><span class="pre">sudo_as_user</span></code>. [19989]</li>
</ul>
</div>
<div class="section" id="id3">
<h3>5.1<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[5.1.22]</strong>: Added <code class="docutils literal"><span class="pre">followers()</span></code>, <code class="docutils literal"><span class="pre">follow()</span></code>, and <code class="docutils literal"><span class="pre">unfollow()</span></code> methods to code handling API requests. [20562]</li>
</ul>
</div>
<div class="section" id="id4">
<h3>3.3<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[3.3.1]</strong>: Modified CRUD code so that if a request reads, sorts, or summarizes a join (ConnectionEntity) field, and the parent entity has not been passed in the request, the code will try to infer it from the filter conditions. Prior to this fix on 3.3 - the API was returning an error when trying to sort Versions on <code class="docutils literal"><span class="pre">playlists.PlaylistVersionConnection.sg_sort_order</span></code>. Note that if the parent entity cannot be inferred automatically, this error will still occur. [17107]</li>
<li><strong>[3.3.0]</strong>: Added support for returning the full paths of thumbnail fields in regular API calls. This works for thumbnail fields on the entity, linked thumbnails, and filmstrip thumbnails. [10693]</li>
<li><strong>[3.0.0]</strong>: We&#8217;ve released v3.0.8 of the Python API which now includes a JSON backend. The JSON transport is up to 40% faster than the XML-RPC based transport. The XML-RPC interface will continue to be supported but may not include new features, so previous versions of the API will still be supported as-is.</li>
<li><strong>[3.0.0]</strong>: Added support for <code class="docutils literal"><span class="pre">name_is</span></code> filter operator on single and multi-entity fields, both in the API and the UI.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>2.4<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[2.4.8]</strong>: Added support for <code class="docutils literal"><span class="pre">id</span></code> inquiry filters in the API. The syntax is slightly different than similar filters, in that the filter value is not an array. [14261]</li>
<li><strong>[2.4.6]</strong>: Fixed issue with multi-entity field filters where Python <code class="docutils literal"><span class="pre">None</span></code> was passed in. Prior to this fix, one could not use the API to create filters such as <code class="docutils literal"><span class="pre">['task_assignees',</span> <span class="pre">'is',</span> <span class="pre">None]</span></code> or <code class="docutils literal"><span class="pre">['task_assignees',</span> <span class="pre">'is_not',</span> <span class="pre">None]</span></code>, without generating an API error. These filters are now allowed, and work as expected. [14111]</li>
<li><strong>[2.4.0]</strong>: Added query builder and API support for next/previous modifiers for the <code class="docutils literal"><span class="pre">in</span> <span class="pre">calendar</span> <span class="pre">period</span></code> filter operators for date and datetime fields. For example, &#8220;find tasks that were created in the last 7 months...&#8221;</li>
<li><strong>[2.4.0]</strong>: Ensured that the UI and the API disallow configuring Note Links field to allow the Task or Note entity type.</li>
<li><strong>[2.4.0]</strong>: Date fields now require <code class="docutils literal"><span class="pre">YYYY-MM-DD</span></code> format. Previously they were documented as requiring that format, but would actually allow other date formats if the server was able to parse them into a valid date.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>2.3<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[2.3.9]</strong>: Ensured that creating a task (via the API) with ONLY the duration set - if that task is created with an upstream task that has an end date - results in the created task having both its Start and Due date set by the task dependency logic. [13407]</li>
<li><strong>[2.3.7]</strong>: Ensured API parity with UI in terms of passing in filters on linked fields more than 1 link away. [12867]</li>
<li><strong>[2.3.7]</strong>: Ensured that API errors are not thrown when creating/updating a task with <code class="docutils literal"><span class="pre">milestone=True</span></code>, and <code class="docutils literal"><span class="pre">start_date=end_date</span></code>. This behavior is true when using <code class="docutils literal"><span class="pre">create()</span></code>, <code class="docutils literal"><span class="pre">update()</span></code>, or either method with <code class="docutils literal"><span class="pre">batch()</span></code>. Also, added a unit test to cover this. [13318]</li>
<li><strong>[2.3.5]</strong>: Added API support for getting Shotgun&#8217;s version and build number. Usage requires Shotgun Python API v3.0.6 or higher.</li>
<li><strong>[2.3.3]</strong>: Fixed bug with API where local file paths for windows mount points were being double-escaped, resulting in <code class="docutils literal"><span class="pre">\</span></code> character sequences. [13119]</li>
</ul>
</div>
<div class="section" id="id7">
<h3>2.2<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[2.2.5]</strong>: Ensured that API calls requesting summary fields do not result in silent logging on errors to production.log. This fix results in no change for API programmers, but does ensure that such API calls can occur without the possibility of killing apache due to unwieldy and unnecessary logging. [12850]</li>
<li><strong>[2.2.4]</strong>: Ensured that creating a Task Template Task through the API doesn&#8217;t require a project id - unlike creating a non template task. [11283]</li>
<li><strong>[2.2.4]</strong>: Fixed error generated when trying to revive a Script (<code class="docutils literal"><span class="pre">ApiUser</span></code>) via the API [12794]</li>
</ul>
</div>
<div class="section" id="id8">
<h3>2.1<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[2.1.2]</strong>: Enforced uniqueness on Script names (<code class="docutils literal"><span class="pre">ApiUser</span></code>) so that when creating scripts, the naming conflicts will no longer be allowed. [11479]</li>
<li><strong>[2.1.0]</strong>: added a <code class="docutils literal"><span class="pre">revive()</span></code> method in the API. Syntax follows that of <code class="docutils literal"><span class="pre">delete()</span></code></li>
</ul>
</div>
<div class="section" id="id9">
<h3>2.0<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>[2.0.8]</strong>: Disallowed retired scripts from authenticating via the API. The main Shotgun method will still return a valid Shotgun instance, but any other method calls will return the following error... <code class="docutils literal"><span class="pre">shotgun.Fault:</span> <span class="pre">[11480]</span></code></li>
<li><strong>[2.0.0]</strong>: Added the ability to link to local files via the API.</li>
<li><strong>[2.0.0]</strong>: Provided API support for <code class="docutils literal"><span class="pre">layout_project</span></code> for Project creation. Functionality mirrors the web interface: omitting <code class="docutils literal"><span class="pre">layout_project</span></code> creates the Project based on Template Project. Supplying <code class="docutils literal"><span class="pre">layout_project</span></code> ensures that the new project is based on the supplied project. This fixes the problem of script-created projects having no pages - since they lacked a template, implicit or explicit.</li>
<li><strong>[2.0.0]</strong>: Improved API error message resulting when trying to set the <code class="docutils literal"><span class="pre">default_value</span></code> property on non status list fields, using <code class="docutils literal"><span class="pre">schema_field_create()</span></code>.</li>
<li><strong>[2.0.0]</strong>: Removed legacy support for <code class="docutils literal"><span class="pre">sg_system_task_type</span></code>. Now, all API methods should use Pipeline Steps instead.</li>
<li><strong>[2.0.0]</strong>: ended support for API v2 (API2)</li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="cookbook/smart_cut_fields.html" class="btn btn-neutral" title="Smart Cut Fields" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Autodesk.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v3.0.32.dev_sphinx',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2114792-1', 'auto');
  ga('send', 'pageview');
</script>



</body>
</html>