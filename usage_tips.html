



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Usage Tips &mdash; python-api pypi documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="python-api pypi documentation" href="index.html"/>
        <link rel="next" title="Examples" href="tutorials.html"/>
        <link rel="prev" title="Authentication" href="authentication.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    <a href='http://developer.shotgunsoftware.com'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo_sg@2x.png'/>
    
    </a>
    

          
            <a href="index.html" class="icon icon-home"> python-api
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">API Usage Tips</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#importing">Importing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entity-fields">Entity Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customentities-from-the-api">CustomEntities from the API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shotgun-ui-fields-not-available-via-the-api">Shotgun UI fields not available via the API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#humanuser">HumanUser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shot">Shot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipeline-step-summary-fields-on-entities">Pipeline Step summary fields on entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-fields">Query Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#audit-fields">Audit Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging-messages-from-the-api">Logging Messages from the API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optimizations">Optimizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#combining-related-queries">Combining Related Queries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter_syntax.html">Filter Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="attachments.html">Working With Files (Attachments)</a></li>
<li class="toctree-l1"><a class="reference internal" href="local_files.html">Working With Local Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging an application with py2app (or py2exe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_changelog.html">Shotgun Server API Changelog</a></li>
</ul>

            
          
       
    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px; 
                color: #b3b3b3; 
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>    
    <style>
        a.custom_post_menu { display: inline; 
                             padding: 0px; 
                             text-decoration: underline; }
    </style>

    <b>python-api</b> pypi.<br>
    
    For more information, please visit
    <a class=custom_post_menu href='https://support.shotgunsoftware.com/home'>Shotgun Support</a>.
    The code associated with this documentation can be found 
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/python-api'>here</a>.

    </div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">python-api</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>API Usage Tips</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-usage-tips">
<h1>API Usage Tips<a class="headerlink" href="#api-usage-tips" title="Permalink to this headline">¶</a></h1>
<p>Below is a list of helpful tips when using the Shotgun API. We have tried to make the API very
simple to use with predictable results while remaining a powerful tool to integrate with your
pipeline. However, there&#8217;s always a couple of things that crop up that our users might not be
aware of. Those are the types of things you&#8217;ll find below. We&#8217;ll be adding to this document over
time as new questions come up from our users that exhibit these types of cases.</p>
<div class="section" id="importing">
<h2>Importing<a class="headerlink" href="#importing" title="Permalink to this headline">¶</a></h2>
<p>We strongly recommend you import the entire <cite>shotgun_api3</cite> module instead of just importing the
<a class="reference internal" href="reference.html#shotgun_api3.Shotgun" title="shotgun_api3.Shotgun"><code class="xref py py-class docutils literal"><span class="pre">shotgun_api3.Shotgun</span></code></a> class from the module. There is other important functionality that
is managed at the module level which may not work as expected if you only import the
<a class="reference internal" href="reference.html#shotgun_api3.Shotgun" title="shotgun_api3.Shotgun"><code class="xref py py-class docutils literal"><span class="pre">shotgun_api3.Shotgun</span></code></a> object.</p>
<p>Do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">shotgun_api3</span>
</pre></div>
</div>
<p>Don&#8217;t:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shotgun_api3</span> <span class="kn">import</span> <span class="n">Shotgun</span>
</pre></div>
</div>
</div>
<div class="section" id="entity-fields">
<h2>Entity Fields<a class="headerlink" href="#entity-fields" title="Permalink to this headline">¶</a></h2>
<p>When you do a <a class="reference internal" href="reference.html#shotgun_api3.Shotgun.find" title="shotgun_api3.Shotgun.find"><code class="xref py py-meth docutils literal"><span class="pre">find()</span></code></a> call that returns a field of type entity or
multi-entity (for example the &#8216;assets&#8217; column on Shot), the entities are returned in a standard
dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;Asset&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;redBall&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<p>For each entity returned, you will get a <code class="docutils literal"><span class="pre">type</span></code>, <code class="docutils literal"><span class="pre">name</span></code>, and <code class="docutils literal"><span class="pre">id</span></code> key. This does not mean
there are fields named <code class="docutils literal"><span class="pre">type</span></code> and <code class="docutils literal"><span class="pre">name</span></code> on the Asset. These are only used to provide a
consistent way to represent entities returned via the API.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">type</span></code>: the entity type (CamelCase)</li>
<li><code class="docutils literal"><span class="pre">name</span></code>: the display name of the entity. For most entity types this is the value of the <code class="docutils literal"><span class="pre">code</span></code>
field but not always. For example, on the Ticket and Delivery entities the <code class="docutils literal"><span class="pre">name</span></code> key would
contain the value of the <code class="docutils literal"><span class="pre">title</span></code> field.</li>
</ul>
</div>
<div class="section" id="customentities-from-the-api">
<h2>CustomEntities from the API<a class="headerlink" href="#customentities-from-the-api" title="Permalink to this headline">¶</a></h2>
<p>Entity types are always referenced by their original names. So if you enable CustomEntity01 and
call it <strong>Widget</strong>. When you access it via the API, you&#8217;ll still use CustomEntity01 as the
<code class="docutils literal"><span class="pre">entity_type</span></code>.</p>
<p>If you want to be able to remember what all of your CustomEntities represent in a way where you
don&#8217;t need to go look it up all the time when you&#8217;re writing a new script, we&#8217;d suggest creating
a mapping table or something similar and dumping it in a shared module that your studio uses.
Something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre># studio_globals.py

entity_type_map = {
  &#39;Widget&#39;: &#39;CustomEntity01&#39;,
  &#39;Foobar&#39;: &#39;CustomEntity02&#39;,
  &#39;Baz&#39;: &#39;CustomNonProjectEntity01,
}

# or even simpler, you could use a global like this
ENTITY_WIDGET = &#39;CustomEntity01&#39;
ENTITY_FOOBAR = &#39;CustomEntity02&#39;
ENTITY_BAZ = &#39;CustomNonProjectEntity01&#39;
</pre></div>
</div>
<p>Then when you&#8217;re writing scripts, you don&#8217;t need to worry about remembering which Custom Entity
&#8220;Foobars&#8221; are, you just use your global:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">shotgun_api3</span>
<span class="kn">import</span> <span class="nn">studio_globals</span>

<span class="n">sg</span> <span class="o">=</span> <span class="n">Shotgun</span><span class="p">(</span><span class="s">&#39;https://mystudio.shotgunstudio.com&#39;</span><span class="p">,</span> <span class="s">&#39;script_name&#39;</span><span class="p">,</span> <span class="s">&#39;0123456789abcdef0123456789abcdef0123456&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">studio_globals</span><span class="o">.</span><span class="n">ENTITY_WIDGET</span><span class="p">,</span>
                 <span class="n">filters</span><span class="o">=</span><span class="p">[[</span><span class="s">&#39;sg_status_list&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="s">&#39;ip&#39;</span><span class="p">]],</span>
                 <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;code&#39;</span><span class="p">,</span> <span class="s">&#39;sg_shot&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="shotgun-ui-fields-not-available-via-the-api">
<h2>Shotgun UI fields not available via the API<a class="headerlink" href="#shotgun-ui-fields-not-available-via-the-api" title="Permalink to this headline">¶</a></h2>
<p>Summary type fields like Query Fields and Pipeline Step summary fields are currently only available
via the UI. Some other fields may not work as expected through the API because they are &#8220;display
only&#8221; fields made available for convenience and are only available in the browser UI.</p>
<div class="section" id="humanuser">
<h3>HumanUser<a class="headerlink" href="#humanuser" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: This is a UI-only field that is a combination of the <code class="docutils literal"><span class="pre">firstname</span></code> + <code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code> +
<code class="docutils literal"><span class="pre">lastname</span></code>.</li>
</ul>
</div>
<div class="section" id="shot">
<h3>Shot<a class="headerlink" href="#shot" title="Permalink to this headline">¶</a></h3>
<p><strong>Smart Cut Fields</strong>: These fields are available only in the browser UI. You can read more about
smart cut fields and the API in the Smart Cut Fields doc (link TK):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">smart_cut_in</span>
<span class="n">smart_cut_out</span>
<span class="n">smart_cut_duration</span>
<span class="n">smart_cut_summary_display</span>
<span class="n">smart_duration_summary_display</span>
<span class="n">smart_head_in</span>
<span class="n">smart_head_out</span>
<span class="n">smart_head_duration</span>
<span class="n">smart_tail_in</span>
<span class="n">smart_tail_out</span>
<span class="n">smart_tail_duration</span>
<span class="n">smart_working_duration</span>
</pre></div>
</div>
</div>
<div class="section" id="pipeline-step-summary-fields-on-entities">
<h3>Pipeline Step summary fields on entities<a class="headerlink" href="#pipeline-step-summary-fields-on-entities" title="Permalink to this headline">¶</a></h3>
<p>The Pipeline Step summary fields on entities that have Tasks aren&#8217;t currently available via the API
and are calculated on the client side in the UI. These fields are like <code class="docutils literal"><span class="pre">step_0</span></code>, or <code class="docutils literal"><span class="pre">step_13</span></code>.
Note that the Pipeline Step entity itself is available via the API as the entity type <code class="docutils literal"><span class="pre">Step</span></code>.</p>
</div>
<div class="section" id="query-fields">
<h3>Query Fields<a class="headerlink" href="#query-fields" title="Permalink to this headline">¶</a></h3>
<p>Query fields are also summary fields like Pipeline Steps, the query is run from the client side UI
and therefore is not currently supported in the API.</p>
</div>
</div>
<div class="section" id="audit-fields">
<h2>Audit Fields<a class="headerlink" href="#audit-fields" title="Permalink to this headline">¶</a></h2>
<p>You can set the <code class="docutils literal"><span class="pre">created_by</span></code> and <code class="docutils literal"><span class="pre">created_at</span></code> fields via the API at creation time. This is
often useful for when you&#8217;re importing or migrating data from another source and want to keep the
history in tact. However, you cannot set the <code class="docutils literal"><span class="pre">updated_by</span></code> and <code class="docutils literal"><span class="pre">updated_at</span></code> fields. These are
automatically set whenever an entity is created or updated.</p>
</div>
<div class="section" id="logging-messages-from-the-api">
<span id="logging"></span><h2>Logging Messages from the API<a class="headerlink" href="#logging-messages-from-the-api" title="Permalink to this headline">¶</a></h2>
<p>The API uses standard python logging but does not define a handler.</p>
<p>To see the logging output in stdout, define a streamhandler in your script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">shotgun_api3</span> <span class="kn">as</span> <span class="nn">shotgun</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<p>To write logging output from the shotgun API to a file, define a file handler in your script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">shotgun_api3</span> <span class="kn">as</span> <span class="nn">shotgun</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;/path/to/your/log&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To suppress the logging output from the API in a script which uses logging, set the level of the
Shotgun logger to a higher level:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">shotgun_api3</span> <span class="kn">as</span> <span class="nn">shotgun</span>
<span class="n">sg_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;shotgun_api3&#39;</span><span class="p">)</span>
<span class="n">sg_log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="optimizations">
<h2>Optimizations<a class="headerlink" href="#optimizations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="combining-related-queries">
<h3>Combining Related Queries<a class="headerlink" href="#combining-related-queries" title="Permalink to this headline">¶</a></h3>
<p>Reducing round-trips for data via the API can significantly improve the speed of your application.
Much like &#8220;Bubble Fields&#8221; / &#8220;Field Hopping&#8221; in the UI, we can poll Shotgun for data on the fields
of entities linked to our main query, both as a part of the query parameters as well as in the
data returned.</p>
<p>Starting with a simple and common example, many queries require knowing what project your data is
associated with. Without using &#8220;field hopping&#8221; in an API call, you would first get the project and
then use that data for your follow up query, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Get the project</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s">&#39;Big Buck Bunny&#39;</span>
<span class="n">sg_project</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Project&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">project_name</span><span class="p">]])</span>

<span class="c"># Use project result to get associated shots</span>
<span class="n">sg_shots</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Shot&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;project&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">sg_project</span><span class="p">]],</span> <span class="p">[</span><span class="s">&#39;code&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>With &#8220;field hopping&#8221; you can combine these queries into:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Get all shots on &#39;Big Buck Bunny&#39; project</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s">&#39;Big Buck Bunny&#39;</span>
<span class="n">sg_shots</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Shot&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;project.Project.name&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">project_name</span><span class="p">]],</span> <span class="p">[</span><span class="s">&#39;code&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>As you can see above, the syntax is to use &#8220;<code class="docutils literal"><span class="pre">.</span></code>&#8221; dot notation, joining field names to entity
types in a chain. In this example we start with the field <code class="docutils literal"><span class="pre">project</span></code> on the Shot entity, then
specify we&#8217;re looking for the &#8220;name&#8221; field on the Project entity by specifying <code class="docutils literal"><span class="pre">Project.name</span></code>.</p>
<p>Now that we&#8217;ve demonstrated querying using dot notation, let&#8217;s take a look at returning linked data
by adding the status of each Sequence entity associated with each Shot in our previous query:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Get shot codes and sequence status all in one query</span>
<span class="n">project_name</span> <span class="o">=</span> <span class="s">&#39;Big Buck Bunny&#39;</span>
<span class="n">sg_shots</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Shot&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;project.Project.name&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">project_name</span><span class="p">]],</span>
                   <span class="p">[</span><span class="s">&#39;code&#39;</span><span class="p">,</span> <span class="s">&#39;sg_sequence.Sequence.sg_status_list&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to performance concerns with deep linking, we only support using dot syntax chains for
single-entity relationships. This means that if you try to pull data through a multi-entity
field you will not get the desired result.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="authentication.html" class="btn btn-neutral" title="Authentication" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Autodesk.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'pypi',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>